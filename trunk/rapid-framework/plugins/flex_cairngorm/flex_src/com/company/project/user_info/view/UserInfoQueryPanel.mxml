<?xml version="1.0" encoding="utf-8"?>

<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" title="搜索框">

	<!-- 回车事件 -->
	<mx:Metadata>
		[Event(name="enter")]
	</mx:Metadata>
	
	<mx:Script>
		<![CDATA[
			import com.company.project.model.*;
			
			import appcommon.flex.util.ConvertUtils;
			
			import mx.validators.Validator;
			import mx.events.FlexEvent;
			
			[Bindable]
			public var userInfo: UserInfo;
			
			public function getUserInfo():UserInfo{
				var userInfo: UserInfo = new UserInfo;
				userInfo.username = usernameInp.text;
				userInfo.password = passwordInp.text;
				userInfo.birthDate = birthDateInp.selectedDate;
				userInfo.sex = ConvertUtils.toNumber(sexInp.text);		
				userInfo.age = ConvertUtils.toNumber(ageInp.text);		
								
				return userInfo;
			}
						
			public function validate(): Boolean{
				var error:Array = Validator.validateAll([
					usernameVld,
					passwordVld,
					birthDateVld,
					sexVld,
					ageVld
				]);
				if(error.length > 0){
					return false;
				} else{
					return true;
				}
			}
		]]>
	</mx:Script>
	
	<mx:StringValidator id="usernameVld" source="{usernameInp}" required="false" property="text"/>
	<mx:StringValidator id="passwordVld" source="{passwordInp}" required="false" property="text"/>
	<mx:DateValidator id="birthDateVld" source="{birthDateInp}" required="false" property="text" allowedFormatChars="-" inputFormat="{UserInfo.FORMAT_BIRTH_DATE}"/>
	<mx:NumberValidator id="sexVld" source="{sexInp}" required="false" property="text"/>
	<mx:NumberValidator id="ageVld" source="{ageInp}" required="false" property="text"/>

	<mx:HBox>
		<mx:Form width="100%" height="100%" left="0" top="0">
			<mx:FormItem label="@Resource(bundle='UserInfo',key='username')">
				<mx:TextInput id="usernameInp" text="{userInfo.username}" enter="dispatchEvent(new FlexEvent(FlexEvent.ENTER))"/>
			</mx:FormItem>
			<mx:FormItem label="@Resource(bundle='UserInfo',key='password')">
				<mx:TextInput id="passwordInp" text="{userInfo.password}" enter="dispatchEvent(new FlexEvent(FlexEvent.ENTER))"/>
			</mx:FormItem>
		</mx:Form>
		<mx:Form width="100%" height="100%" left="0" top="0">
			<mx:FormItem label="@Resource(bundle='UserInfo',key='birthDate')">
				<mx:DateField id="birthDateInp" selectedDate="{userInfo.birthDate}" formatString="{UserInfo.FORMAT_BIRTH_DATE}" width="150" editable="true" yearNavigationEnabled="true"/>
			</mx:FormItem>
			<mx:FormItem label="@Resource(bundle='UserInfo',key='sex')">
				<mx:TextInput id="sexInp" text="{userInfo.sex}" enter="dispatchEvent(new FlexEvent(FlexEvent.ENTER))"/>
			</mx:FormItem>
		</mx:Form>
		<mx:Form width="100%" height="100%" left="0" top="0">
			<mx:FormItem label="@Resource(bundle='UserInfo',key='age')">
				<mx:TextInput id="ageInp" text="{userInfo.age}" enter="dispatchEvent(new FlexEvent(FlexEvent.ENTER))"/>
			</mx:FormItem>
		</mx:Form>
	</mx:HBox>
		
</mx:Panel>	

