<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="mcenter_creditpay"  remarks="帐务信息表">

	<operation name="findCreditpayDetail" paging="true" remarks="信用支付明细分页查询">
		<extraparams>
			<param name="tradeNo" javatype="java.lang.String"/>
		</extraparams>
		<sql>
			<![CDATA[
	    	SELECT 
		        BILL_NO ,MC.TRADE_NO ,AMOUNT ,TRANS_DATE ,TRANS_ACCOUNT_OUT ,TRANS_ACCOUNT_IN ,CUSTOMER_ID ,BIZ_NAME ,OPERATOR_ID ,OPERATOR_NAME ,MEMO ,loan_success ,pay_success ,MC.gmt_trade_create,
    			PNR,TICKET_NO_START,TICKET_NO_END,system_partner,MAE.gmt_trade_create,
    			id,BTB.trade_no,out_trade_no,seller_account,seller_login_email,buyer_account,buyer_login_email,seller_type,buyer_type,trade_from,trade_email,operator_role,trade_status,total_fee,service_fee_ratio,service_fee,currency,seller_action,buyer_action,gmt_create,seller_user_id,buyer_user_id,additional_trd_status,trade_type,seller_fullname,buyer_fullname,seller_nick,buyer_nick,goods_title,gmt_last_modified_dt,stop_timeout,gathering_type,buyer_marker,seller_marker,buyer_marker_memo,seller_marker_memo,channel,product,pay_channel
		    FROM mcenter_creditpay MC
		    	inner join mcenter_air_ext MAE on MC.trade_no = MAE.trade_no 
		    	inner join trade_base BTB on MC.trade_no = BTB.trade_no
		    WHERE 
		    	MC.owner IN <iterate property="owner" open="(" close=")" conjunction=",">#owner[]#</iterate>
		    	 
				<isNotEmpty prepend="and" property="billNo">
						MC.bill_no = #billNo#
				</isNotEmpty>		    
		       <isNotEmpty prepend="AND" property="tradeNo">
		             MC.TRADE_NO = #tradeNo#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="amount">
		             MC.AMOUNT = #amount#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="transDate">
		             MC.TRANS_DATE = #transDate#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="transAccountOut">
		             MC.TRANS_ACCOUNT_OUT = #transAccountOut#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="transAccountIn">
		             MC.TRANS_ACCOUNT_IN = #transAccountIn#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="customerId">
		             MC.CUSTOMER_ID = #customerId#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="bizName">
		             MC.BIZ_NAME = #bizName#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="operatorId">
		             MC.OPERATOR_ID = #operatorId#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="operatorName">
		             MC.OPERATOR_NAME = #operatorName#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="memo">
		             MC.MEMO = #memo#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="recordStamp">
		             MC.RECORD_STAMP = #recordStamp#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="loanSuccess">
		             MC.loan_success = #loanSuccess#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="paySuccess">
		             MC.pay_success = #paySuccess#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="gmtTradeCreateBegin">
		             MC.gmt_trade_create &gt;= #gmtTradeCreateBegin#
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="gmtTradeCreateEnd">
		             MC.gmt_trade_create &lt;= #gmtTradeCreateEnd#
		       </isNotEmpty>
		       
		       <isNotEmpty prepend="AND" property="outTradeNo">
		             BTB.out_trade_no = #outTradeNo#
		       </isNotEmpty>

				<isNotEmpty prepend="and" property="pnr">
					MAE.pnr = #pnr#
				</isNotEmpty>
				<isNotEmpty prepend="and" property="ticketNo">
					MAE.TICKET_NO_END >= #ticketNo#
				</isNotEmpty>
				<isNotEmpty prepend="and" property="ticketNo">
					MAE.TICKET_NO_START &lt;= #ticketNo#
				</isNotEmpty>
				
	    		<isNotEmpty property="orderby">
	    			ORDER BY #orderby#
	    		</isNotEmpty>
		    ]]>
		</sql>		
	</operation>  
	  			
</table>
