<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>代码生成器及系统配置</title>
<link href="default.css" type="text/css" rel="stylesheet">
</head>

<body>

<H1><a href='http://code.google.com/p/rapid-framework/' target="_blank">详细在线文档请点击这里</a></H1> 
<H1>生成器相关修改</H1>
	<OL>
		<LI>修改eclipse项目属性将整个项目修改为"UTF-8"编码
		<LI>将src/javacommon,src/resources,generator/src加入源代码路径
		<LI>将generator/lib目录下的文件加入classpath,如果没有你的数据库驱动,请自己添加
		<LI>修改代码生成器的配置文件generator/src/generator.properties
		<LI>以application方式运行generator.GeneratorMain类,运行时直接修改main()方法添加相关表
		<LI>生成的文件在$outRoot(默认为:d/webapp-generator-output)目录,再根据所需手工拷回至工作目录
	</OL>

<H1>系统搭建相关配置文件修改 - 加<font color=red>(*)号</font>为默认值如果满足则无需修改</H1>

<h2>插件安装</h2>
	<pre>
		通过ant来安装插件,ant脚本文件:plugins/build.xml (注:通过eclipse打开文件,再打开outline视图,右键点击target即可运行ant任务)
		任务介绍:
		install_plugin : 弹出对话框根据"插件名称"安装插件.可以安装任何插件
		install_xxxxxx : 内置的几个名称用于快速插件安装,避免需要手工输入插件名称.
		如需要安装struts2与hibernate插件,直接运行install_struts2+hibernate target即可
	</pre>
	
<h2>修改 数据库连接属性</h2>
	<pre>
		src/resources/config/jdbc.properties, 该配置文件通过spring applicationContext-resource.xml加载
		数据源在这个配置文件里面定义
	</pre>
			
<h2>修改 spring 配置文件</h2>
<pre> 			
<h3>service配置文件: src/resource/spring/applicationContext-service.xml</h3> 
		(*)修改context:component-scan节点属性,默认加载com.**.service
<h3>resource配置文件: src/resource/spring/applicationContext-resource.xml</h3>
		(*)修改数据库事务配置aop:config定义的pointcut,默认为pointcut="execution(* com.**.service.*Manager.*(..))"			
</pre>
			
<h2>dao 配置相关修改,<font color=red>三选一</font></h2>
<pre>
<h3>hibernate dao配置文件: src/resource/spring/applicationContext-dao.xml</h3>
		修改sessionFactory.hibernateProperties的数据库方言(Dialect)属性,默认为MysqlDialect
		(*)修改sessionFactory的annotatedScanPackages以确定要加载的类,默认加载com.**.model
		(*)修改context:component-scan节点属性以确定要加载的dao,默认加载com.**.dao
<h3>ibatis dao配置文件: src/resource/spring/applicationContext-dao.xml</h3>
		修改代码生成器模板${className}SqlMap.xml的&lt;select id="pageSelect">节点,以支持分页查询使用不同的数据库物理分页,默认为Mysql
		(*)修改sqlMapClient的mappingLocations以确定要加载的SqlMap.xml,默认值为:classpath*:/com/**/model/**/*SqlMap.xml
		(*)修改context:component-scan节点属性以确定要加载的dao,默认加载com.**.dao
<h3>spring jdbc dao配置文件: src/resource/spring/applicationContext-dao.xml</h3>
		修改dialect,以支持不同的数据库分页查询. 默认值为:MySQLDialect
		(*)修改context:component-scan节点属性以确定要加载的dao,默认加载com.**.dao
</pre>
			
<h2>WebFramework 配置文件修改,<font color=red>三选一</font></h2>
<pre>
<h3>strust</h3>
配置文件web/WEB-INF/struts-config.xml
根据你的包结构修改struts的通配符配置
<h3>struts2</h3>
配置文件src/resources/struts.xml
修改说明:
 1.修改pakcage的namespace属性,因为URL访问规则是: /namesapce/Entity/method.do 
 2.根据你的包结构修改action节点的class属性 
<h3>spring mvc</h3>
配置文件:web/WEB-INF/springmvc-servlet.xml
	修改说明:
	(*)修改context:component-scan以确定要加载的controller,默认为com.**.controller
	修改class=ControllerClassNameHandlerMapping节点的pathPrefix以确定URL生成的前缀,URL规则为/pathPrefix/Entity/method.do,类似struts2的nemespace
</pre> 
  	
<H1>模板相关</H1>
<H2>模板特性</H2>
<pre>
特性1: 模板文件的的名称与目录名称可以直接引用相关变量,如${className}.java
特性2: .include结尾的模板文件会被无条件忽略,不会生成文件,一般用于其它文件包含
特性3: 以@testExpression结尾的模板文件为有条件忽略,如果testExpression的值在数据模型为true,
	则生成该文件,生成的文件不会包含@testExpression,反之
	如${className}Id.java@compositeId
特性4: 支持插入操作,如模板输出生成的地方已经有该<b>同名的文件</b>存在,
	并且文件中有包含"webapp-generator-insert-location"标记,
	则模板生成的内容会插入在该标记之后
	该特性对如生成的spring配置内容插入spring配置文件十分有用
</pre>

<H2>主要相关模板讲解</H2>
<pre>
custom.include: 包含一些变量的配置
macro.include: 包含一些公用的FreeMarker macro
</pre>

<h1>相关文件及目录介绍</h1>
<pre>
doc
--guide.html		系统搭建及代码生成器使用说明
generator			代码生成器的目录
plugins 			项目的相关插件目录
--build.xml			项目的插件安装脚本
template			存放代码生成器的模板文件
web					web内容目录
src					java源代码目录
</pre>	
</body>  	
</html>

